<?xml version="1.0" encoding="utf-8" ?>
<Feature SiLA2Version="0.2" FeatureVersion="1.0" MaturityLevel="Draft" Originator="org.silastandard" Category="core"
         xmlns="http://www.sila-standard.org"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.sila-standard.org https://gitlab.com/SiLA2/sila_base/blob/meta_data/schema/FeatureDefinition.xsd">
    <Identifier>LockController</Identifier>
    <DisplayName>Lock Controller</DisplayName>
    <Description>
        This Feature allows a SiLA Client to lock a SiLA Server for exclusive use, preventing other SiLA Clients from using the device while it is locked.
        To lock a SiLA Server a lock id has to be set, using the 'LockServer' command. This id has to be sent with every (lock protected) call to the SiLA Server in order to use it's functionality.
        To sent the id the SiLA Client Meta Data 'LockId' has to be used.
        When locking a SiLA Server a timeout can be specified that defines the time after which the SiLA Server will be automatically unlocked if no call with valid lock id has been received meanwhile.
        After the timeout has expired or after explicit unlock no lock id has to be sent any more.
    </Description>
    <Command>
        <Identifier>LockServer</Identifier>
        <DisplayName>Lock Server</DisplayName>
        <Description>Locks a SiLA Server for exclusive use by setting a lock id that has to be sent with any following calls as long as the server is locked.</Description>
        <Observable>No</Observable>
        <Parameter>
            <Identifier>LockId</Identifier>
            <DisplayName>Lock Id</DisplayName>
            <Description>The lock id that has to be sent with every (lock protected) call to use the server's functionality.</Description>
            <DataType>
                <Basic>String</Basic>
            </DataType>
        </Parameter>
        <Parameter>
            <Identifier>Timeout</Identifier>
            <DisplayName>Timeout</DisplayName>
            <Description>
                The time [s] after a SiLA Server is automatically unlocked when no call with valid lock id is received meanwhile.
                A timeout of 0 specifies an infinite time (no timeout).
            </Description>
            <DataType>
                <Constrained>
                    <DataType>
                        <Basic>Integer</Basic>
                    </DataType>
                    <Constraints>
                        <Unit>
                            <Label>s</Label>
                            <UnitComponent>
                                <SIUnit>Second</SIUnit>
                                <Exponent>1</Exponent>
                                <Factor>1</Factor>
                                <Offset>0</Offset>
                            </UnitComponent>
                        </Unit>
                    </Constraints>
                </Constrained>
            </DataType>
        </Parameter>
        <StandardExecutionErrors>
            <StandardExecutionErrorIdentifier>ServerAlreadyLocked</StandardExecutionErrorIdentifier>
        </StandardExecutionErrors>
    </Command>
    <Command>
        <Identifier>UnlockServer</Identifier>
        <DisplayName>Unlock Server</DisplayName>
        <Description>Unlocks a locked SiLA Server. No lock id has to be sent for any following calls as long as the server is not locked again.</Description>
        <Observable>No</Observable>
        <StandardExecutionErrors>
            <StandardExecutionErrorIdentifier>ServerNotLocked</StandardExecutionErrorIdentifier>
        </StandardExecutionErrors>
    </Command>
    <Property>
        <Identifier>IsLocked</Identifier>
        <DisplayName>IsLocked State</DisplayName>
        <Description>
            Returns true if the SiLA Server is currently locked or false else.
            This property MUST NOT be lock protected, so that any SiLA Client can query the current lock state of a SiLA Server.
        </Description>
        <Observable>No</Observable>
        <DataType>
            <Basic>Boolean</Basic>
        </DataType>
    </Property>
    <StandardExecutionError>
        <Identifier>InvalidLockId</Identifier>
        <DisplayName>Invalid Lock Id</DisplayName>
        <Description>The sent lock id is not valid.</Description>
    </StandardExecutionError>
    <StandardExecutionError>
        <Identifier>ServerAlreadyLocked</Identifier>
        <DisplayName>Server Already Locked</DisplayName>
        <Description>The SiLA Server can not be locked because it is already locked.</Description>
    </StandardExecutionError>
    <StandardExecutionError>
        <Identifier>ServerNotLocked</Identifier>
        <DisplayName>Server Not Locked</DisplayName>
        <Description>The SiLA Server can not be unlocked because it is not locked.</Description>
    </StandardExecutionError>
    <Metadata>
        <Identifier>LockId</Identifier>
        <DisplayName>Lock Id</DisplayName>
        <Description>The lock id has to be sent with every (lock protected) call in order to use the functionality of a locked SiLA Server.</Description>
        <DataType>
            <Basic>String</Basic>
        </DataType>
        <SendWith>All</SendWith>
        <!-- SendWith can be removed, once the schema has been changed accordingly -->
    </Metadata>
</Feature>